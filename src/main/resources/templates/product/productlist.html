<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>净水器售后管理系统</title>

    <!-- Bootstrap -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <!-- Font Awesome -->
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet">
    <!-- NProgress -->
    <link th:href="@{/css/nprogress.css}" rel="stylesheet">
    <!-- iCheck -->
    <link th:href="@{/css/green.css}" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link th:href="@{/css/custom.min.css}" rel="stylesheet">
</head>

<body class="nav-md">
<div class="container body">
    <div class="main_container">
        <div class="col-md-3 left_col">
            <div class="left_col scroll-view">

                <div class="clearfix"></div>

                <br/>

                <!-- sidebar menu -->
                <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                    <div class="menu_section">
                        <div class="text-center">
                            <h2 style="margin-left: 25px">净水器售后管理系统</h2>
                        </div>
                        <ul style="margin-left: 20px" class="nav side-menu">
                            <li><a><i class="fa fa-home"></i> 客户管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="toaddcustomer">信息录入</a></li>
                                    <li><a href="customerinfolist">信息统计/查询/修改</a></li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-edit"></i> 售后管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="repairhandle">报修处理</a></li>
                                    <li><a href="#">反馈处理</a></li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-desktop"></i> 销售管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="tosaleadd">添加销售记录</a></li>
                                    <li><a href="saleinfolist">销售记录修改/查询</a></li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-table"></i> 产品管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="toaddproduct">信息录入</a></li>
                                    <li><a href="productinfolist">信息统计/查询/修改</a></li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-bar-chart-o"></i> 库存管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="inboundinfolist">入库管理</a></li>
                                    <li><a href="outboundlist">出库管理</a></li>
                                    <li><a href="stocklist">库存盘点</a></li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-clone"></i> 财务管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="incomedetails">收入明细</a></li>
                                    <li><a href="expensedetails">支出明细</a></li>
                                    <li><a href="listgrossprofit">毛利统计</a></li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-sitemap"></i> 报表管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu">
                                    <li><a href="listsalereport">销售报表</a></li>
                                    <li><a href="#">反馈报表</a></li>
                                    <li><a href="#">报修报表</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /sidebar menu -->

                <!-- /menu footer buttons -->
                <div class="sidebar-footer hidden-small">
                    <h2 style="margin-left: 25px">净水器售后管理系统</h2>
                </div>
                <!-- /menu footer buttons -->
            </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
            <div class="nav_menu">
                <div class="nav toggle">
                    <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                </div>
                <nav class="nav navbar-nav">
                    <ul class=" navbar-right">
                        <li class="nav-item dropdown open" style="padding-left: 15px;">
                            <a href="javascript:" class="user-profile dropdown-toggle" aria-haspopup="true"
                               id="navbarDropdown" data-toggle="dropdown" aria-expanded="false">
                                <span th:text="${session.admin.name}" th:if="${not #strings.isEmpty(session.admin.name)}"></span>
                            </a>
                            <div class="dropdown-menu dropdown-usermenu pull-right" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item"  href="adminlogout"><i class="fa fa-sign-out pull-right"></i> Log Out</a>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
            <div class="">
                <div class="clearfix"></div>
                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <div class="x_panel">
                            <div class="x_content">
                                <form th:action="@{/productinfolist}" th:method="post" class="form-horizontal form-label-left">
                                    <input type="hidden" name="pageNum" value="1">
                                    <div class="item form-group">
                                        <label class="col-form-label" for="product_name" style="margin-left: 80px">
                                            <span style="font-size: 18px;">名称：</span>
                                        </label>
                                        <input type="text" name="product_name" id="product_name" class="form-control"
                                               style="width: 200px" th:value="${product_name}">
                                        <label class="col-form-label" for="product_type" style="margin-left: 80px">
                                            <span style="font-size: 18px;">分类：</span>
                                        </label>
                                        <select id="product_type" name="product_type" class="form-control" style="width: 200px"
                                                th:if="${not #strings.isEmpty(productTypeList)}">
                                            <option value="">&#45;&#45;请选择&#45;&#45;</option>
                                            <option th:each="p_type:${productTypeList}" th:selected="${p_type.value eq product_type}"
                                            th:value="${p_type.value}" th:text="${p_type.value}"></option>
                                        </select>
                                        <label class="col-form-label" for="product_brand" style="margin-left: 80px">
                                            <span style="font-size: 18px;">品牌：</span>
                                        </label>
                                        <select id="product_brand" name="product_brand" class="form-control" style="width: 200px"
                                        th:if="${not #strings.isEmpty(productBrandList)}">
                                            <option value="">&#45;&#45;请选择&#45;&#45;</option>
                                            <option th:each="b_type:${productBrandList}" th:selected="${b_type.value eq product_brand}"
                                            th:value="${b_type.value}" th:text="${b_type.value}"></option>
                                        </select>
                                        <button type="submit" class="btn btn-primary" style="margin-left: 80px">查询</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <div class="x_panel">
                            <div class="x_content">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                        <tr class="headings">
                                            <th class="column-title">分类</th>
                                            <th class="column-title">品牌</th>
                                            <th class="column-title">名称</th>
                                            <th class="column-title">规格/型号</th>
                                            <th class="column-title">生产厂家</th>
                                            <th class="column-title">采购价</th>
                                            <th class="column-title">销售价</th>
                                            <th class="column-title no-link last"><span class="nobr">操作</span></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                            <tr th:each="product:${productList.list}">
                                                <td th:text="${product.product_type}"></td>
                                                <td th:text="${product.product_brand}"></td>
                                                <td th:text="${product.product_name}"></td>
                                                <td th:text="${product.product_spec}"></td>
                                                <td th:text="${product.product_factory}"></td>
                                                <td th:text="${product.purchase_price}"></td>
                                                <td th:text="${product.sale_price}"></td>
                                                <td class=" last">
                                                    <div>
                                                        <button data-toggle="modal" data-target="#product_show" type="button"
                                                                class="btn btn-primary btn-sm showProduct"
                                                                th:attr="data-show=${product.product_id}">查看</button>
                                                        <button type="button" class="btn btn-primary btn-sm modifyProduct"
                                                                th:attr="data-modify=${product.product_id}">修改</button>
                                                        <button type="button" class="btn btn-danger btn-sm deleteProduct"
                                                                th:attr="data-delete=${product.product_id},data-productName=${product.product_name}">
                                                            删除</button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-5">
                        <div class="dataTables_info" id="datatable-responsive_info" role="status" aria-live="polite">
                            <p>共 <span th:text="${productList.total}"></span> 条记录  <span th:text="${productList.pageNum} + '/' + ${productList.pages}"></span>页</p>
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="dataTables_paginate paging_simple_numbers"
                             id="datatable-responsive_paginate">
                            <ul class="pagination">
                                <li class="paginate_button previous ">
                                    <a href="javascript:void(0);" th:onclick="'javascript:page_nav('+document.forms[0]+','+1+')'"
                                       aria-controls="datatable-responsive" data-dt-idx="0" tabindex="0">首页</a>
                                </li>
                                <li class="paginate_button " th:if="${productList.hasPreviousPage}">
                                    <a href="javascript:void(0);" th:onclick="'javascript:page_nav('+document.forms[0]+','+${productList.prePage}+')'"
                                       aria-controls="datatable-responsive" data-dt-idx="1" tabindex="0">上一页</a>
                                </li>

                                <li class="paginate_button " th:if="${productList.hasNextPage}">
                                    <a href="javascript:void(0);" th:onclick="'javascript:page_nav('+document.forms[0]+','+${productList.nextPage}+')'"
                                       aria-controls="datatable-responsive" data-dt-idx="1" tabindex="0">下一页</a>
                                </li>
                                <li class="paginate_button next">
                                    <a href="javascript:void(0);" th:onclick="'javascript:page_nav('+document.forms[0]+','+${productList.pages}+')'"
                                       aria-controls="datatable-responsive" data-dt-idx="7" tabindex="0">最后一页</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /page content -->

        <!--footer-->

        <!--/footer-->
    </div>
</div>

<!--product show modal-->
<div class="modal fade" id="product_show" tabindex="-1" role="dialog" aria-labelledby="showModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="showModalLabel">产品详细信息</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form class="form-horizontal form-label-left">
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="product_id_show">
                            ID
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input type="text" id="product_id_show" readonly class="form-control">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="product_type_show">
                            分类
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input type="text" id="product_type_show" readonly class="form-control">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="product_brand_show">
                            品牌
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input type="text" id="product_brand_show" readonly class="form-control">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="product_name_show">
                            名称
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input type="text" id="product_name_show" readonly class="form-control">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label for="product_spec_show" class="col-form-label col-md-3 col-sm-3 label-align">
                            规格/型号
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input id="product_spec_show" class="form-control" type="text" readonly>
                        </div>
                    </div>
                    <div class="item form-group">
                        <label for="product_factory_show" class="col-form-label col-md-3 col-sm-3 label-align">
                            生产厂家
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input id="product_factory_show" class="form-control" type="text" readonly>
                        </div>
                    </div>
                    <div class="item form-group">
                        <label for="purchase_price_show" class="col-form-label col-md-3 col-sm-3 label-align">
                            采购价
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input id="purchase_price_show" class="form-control" type="text" readonly>
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="sale_price_show">
                            销售价
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <input id="sale_price_show" class="form-control" type="text" readonly>
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="product_detail_show">
                            产品简介
                        </label>
                        <div class="col-md-9 col-sm-9 ">
                            <textarea id="product_detail_show" readonly class="form-control"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- jQuery -->
<script th:src="@{/js/jquery.min.js}"></script>
<!-- Bootstrap -->
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
<!-- FastClick -->
<script th:src="@{js/fastclick.js}"></script>
<!-- NProgress -->
<script th:src="@{/js/nprogress.js}"></script>
<!-- iCheck -->
<script th:src="@{/js/icheck.min.js}"></script>

<!-- Custom Theme Scripts -->
<script th:src="@{/js/custom.min.js}"></script>

<script th:src="@{/localjs/productlist.js}"></script>
<script th:src="@{/localjs/page.js}"></script>
</body>
</html>
